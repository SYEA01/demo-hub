<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.example.tree.mapper.SubjectFolderMapper">

    <!-- 结果映射：Java 实体字段 与 数据库列 的映射 -->
    <resultMap id="BaseResultMap" type="org.example.tree.entity.SubjectFolderEntity">
        <id property="id" column="ID"/>
        <result property="createTime" column="CREATE_TIME"/>
        <result property="updateTime" column="UPDATE_TIME"/>
        <result property="name" column="NAME"/>
        <result property="parentId" column="PARENT_ID"/>
        <result property="userId" column="USER_ID"/>
    </resultMap>

    <!-- 可复用的列名 SQL 片段 -->
    <sql id="Base_Column_List">
        ID
        , CREATE_TIME, UPDATE_TIME, NAME, PARENT_ID, USER_ID
    </sql>

    <!-- 根据主键查询 -->
    <select id="selectById" parameterType="long" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM SUBJECT_FOLDER
        WHERE ID = #{id}
    </select>

    <!-- 查询所有（生产环境慎用） -->
    <select id="selectAll" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM SUBJECT_FOLDER
    </select>

    <!--    &lt;!&ndash; 条件查询示例（可根据需要扩展） &ndash;&gt;-->
    <!--    <select id="selectByCondition" parameterType="map" resultMap="BaseResultMap">-->
    <!--        SELECT-->
    <!--            <include refid="Base_Column_List"/>-->
    <!--        FROM {Table_Name}-->
    <!--        <where>-->
    <!--            <if test="id != null">AND ID = #{id}</if>-->
    <!--            &lt;!&ndash; 添加其他条件-->
    <!--            <if test="fieldName != null and fieldName != ''">AND FIELD_NAME = #{fieldName}</if>-->
    <!--            &ndash;&gt;-->
    <!--        </where>-->
    <!--    </select>-->

    <!-- 插入记录 -->
    <insert id="insert" parameterType="org.example.tree.entity.SubjectFolderEntity" useGeneratedKeys="true"
            keyProperty="id">
        INSERT INTO SUBJECT_FOLDER (<include refid="Base_Column_List"/>)
        VALUES (#{id}, #{createTime}, #{updateTime}, #{name}, #{parentId}, #{userId})
    </insert>

    <!--    &lt;!&ndash; 插入非空字段（更安全） &ndash;&gt;-->
    <!--    <insert id="insertSelective" parameterType="{Entity_Full_Path}"-->
    <!--            useGeneratedKeys="true" keyProperty="id">-->
    <!--        INSERT INTO {Table_Name}-->
    <!--        <trim prefix="(" suffix=")" suffixOverrides=",">-->
    <!--            <if test="id != null">ID,</if>-->
    <!--            <if test="createTime != null">CREATE_TIME,</if>-->
    <!--            <if test="updateTime != null">UPDATE_TIME,</if>-->
    <!--            &lt;!&ndash; 其他字段 &ndash;&gt;-->
    <!--        </trim>-->
    <!--        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">-->
    <!--            <if test="id != null">#{id},</if>-->
    <!--            <if test="createTime != null">#{createTime},</if>-->
    <!--            <if test="updateTime != null">#{updateTime},</if>-->
    <!--            &lt;!&ndash; 其他参数 &ndash;&gt;-->
    <!--        </trim>-->
    <!--    </insert>-->

    <!-- 更新记录 -->
    <update id="update" parameterType="org.example.tree.entity.SubjectFolderEntity">
        UPDATE SUBJECT_FOLDER
        <set>
            <if test="updateTime != null">UPDATE_TIME = #{updateTime},</if>
            <if test="parentId != null">PARENT_ID = #{parentId},</if>
            <if test="name != null">NAME = #{name},</if>
        </set>
        WHERE ID = #{id}
    </update>

    <!-- 删除记录 -->
    <delete id="deleteById" parameterType="long">
        DELETE
        FROM SUBJECT_FOLDER
        WHERE ID = #{id}
    </delete>

    <!--    &lt;!&ndash; 批量删除（通过 ID 列表） &ndash;&gt;-->
    <!--    <delete id="deleteByIds" parameterType="list">-->
    <!--        DELETE FROM {Table_Name}-->
    <!--        WHERE ID IN-->
    <!--        <foreach item="id" collection="list" open="(" separator="," close=")">-->
    <!--            #{id}-->
    <!--        </foreach>-->
    <!--    </delete>-->

</mapper>